<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>後台 | 首頁</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="./style/all.css">

</head>

<body>
  <div id="app" class="row gx-0">
    <div class="col-md-2 bg-pink">
      <ul class="list-unstyled navside__bg  m-0">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
      </ul>

    </div>
    <div class="col-md-10">
      <div class="p-3">
        <div class="text-end pe-5">
          <button type="button" class="btn btn-pink" data-bs-toggle="modal"
            data-bs-target="#addProductModal">建立新產品資訊</button>

        </div>
        <table class="table ">
          <thead>
            <tr class="text-start">
              <th scope="col">#</th>
              <th scope="col">影片名稱</th>
              <th scope="col">類型</th>
              <th scope="col">原價</th>
              <th scope="col">定價</th>
              <th scope="col" width="146">上架</th>
              <th scope="col" width="146">編輯</th>
              <th scope="col" width="146">查看細節</th>
            </tr>
          </thead>
          <tbody>
            <tr v-for="(item,index) in products" :key="item.id">
              <th scope="row">{{index+1}}</th>
              <td> {{item.title}}</td>
              <td> {{item.category}}</td>
              <td>{{item.origin_price}}</td>
              <td>{{item.price}}</td>
              <td>
                <div class="form-check form-switch ">
                  <input v-if=" item.is_enabled" class="form-check-input " type="checkbox" id="flexSwitchCheckChecked"
                    checked>
                  <input v-else class="form-check-input " type="checkbox" id="flexSwitchCheckChecked">
                </div>
              </td>
              <td>
                <div class="btn-group" role="group" aria-label="Basic addProduct">
                  <button type="button" class="btn btn-outline-success" data-bs-toggle="modal"
                    data-bs-target="#updateProductModal" @click="tempProduct = item">編輯</button>
                  <button type="button" class="btn btn-outline-danger" @click="removeProduct(item.id)">刪除</button>
                </div>
              </td>
              <td> <button @click="tempProduct = item" class="btn btn-pink">查看</button></td>
            </tr>

            <tr>
              <td scope="row" colspan="7">目前有 {{ products.length }} 部影片</td>
            </tr>
          </tbody>
        </table>
        <div class="row">
          <h2 class="fs-4 fw-bold">單一影片資訊</h2 class="fs-4 fw-bold">
          <div class="col-4">
            <template v-if="tempProduct">
              <div class="card mb-3">
                <div class="ratio ratio-1x1 ">
                  <img :src="tempProduct.imageUrl" class="objectFit card-img-top primary-image" alt="主圖" />
                </div>
                <div class="card-body">
                  <h5 class="card-title">
                    {{tempProduct.title}}
                    <span class="badge bg-pink ms-2">{{tempProduct.category}}</span>
                  </h5>
                  <p class="card-text">影片描述： {{tempProduct.description}} </p>
                  <p class="card-text">影片內容： {{tempProduct.content}} </p>
                  <div class="d-flex">
                    <p class="card-text me-2">{{tempProduct.price }}</p>
                    <p class="card-text text-pink"><del>{{tempProduct.origin_price }}</del></p>
                    {{tempProduct.unit }} / 元
                  </div>
                </div>
              </div>

            </template>
          </div>

          <div class="col-4 ">
        
            <template v-if="tempProduct.imagesUrl">
              <div v-for="item in tempProduct.imagesUrl" :key="item" class="ratio ratio-1x1 ">
                <img v-if="item != '' " :src="item" alt="" class="objectFit images m-2" />
              </div>
            </template>
          </div>

          <p v-if="!tempProduct" class="text-danger">請點選一部影片查看詳細資訊</p>
        </div>

      </div>
    </div>



    <!-- Modal 建立新產品-->
    <div class="modal fade" id="addProductModal" tabindex="-1" aria-labelledby="addProductModalLabel"
      aria-hidden="true">
      <div class="modal-dialog  modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addProductModalLabel">建立產品資訊</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body ">



            <div class="row">
              <div class="col-lg-6">
                <div class="mb-3">
                  <label for="title" class="form-label">產品標題</label>
                  <input v-model="addProductData.title" type="text" class="form-control bg-light text-black" id="title"
                    placeholder="請輸入產品標題">
                </div>
                <div class="mb-3">
                  <label for="description" class="form-label">產品描述</label>
                  <input v-model="addProductData.description" type="text" class="form-control bg-light text-black"
                    id="description" placeholder="請輸入產品描述">
                </div>
                <div class="mb-3">
                  <label for="content" class="form-label">產品說明</label>
                  <input v-model="addProductData.content" type="text" class="form-control bg-light text-black"
                    id="content" placeholder="請輸入產品說明">
                </div>

              </div>
              <div class="col-lg-6">
                <div class="row">
                  <div class="col-lg-6  ">
                    <div class="mb-3">
                      <label for="category" class="form-label">分類</label>
                      <input v-model="addProductData.category" type="text" class="form-control bg-light text-black"
                        id="category" placeholder="分類">
                    </div>
                    <div class="mb-3">
                      <label for="unit" class="form-label">單位</label>
                      <input v-model="addProductData.unit" type="text" class="form-control bg-light text-black"
                        id="unit" placeholder="單位">
                    </div>


                  </div>
                  <div class="col-lg-6  ">
                    <div class="mb-3">
                      <label for="originPrice" class="form-label">原價</label>
                      <input v-model="addProductData.origin_price" min="0" type="number"
                        class="form-control bg-light text-black" id="originPrice" placeholder="原價">
                    </div>
                    <div class="mb-3">
                      <label for="price" class="form-label">售價</label>
                      <input v-model="addProductData.price" min="0" type="number"
                        class="form-control bg-light text-black" id="price" placeholder="售價">
                    </div>

                  </div>

                </div>



              </div>

            </div>


            <div class="mb-3">
              <label for="imageUrl" class="form-label">輸入主圖網址</label>
              <input v-model="addProductData.imageUrl" type="text" class="form-control bg-light text-black"
                id="imageUrl" placeholder="請輸入主圖網址">

              <img class="mt-3 img-fluid" :src="addProductData.imageUrl" alt="">
            </div>
            <div class="row">
        
              <div  class="col-lg-6">
                <div class="mb-3">
                  <label for="imagesUrl1" class="form-label">輸入圖片網址 1</label>
                  <input v-model="addProductData.imagesUrl[0]" type="text" class="form-control bg-light text-black"
                    id="imagesUrl1" placeholder="請輸入圖片網址 1">

                  <img class="mt-3 img-fluid" :src="addProductData.imagesUrl[0]" alt="">
                </div>
              </div>
              <div class="col-lg-6">
                <div class="mb-3">
                  <label for="imagesUrl2" class="form-label">輸入圖片網址 2</label>
                  <input v-model="addProductData.imagesUrl[1]" type="text" class="form-control bg-light text-black"
                    id="imagesUrl2" placeholder="請輸入圖片網址 2">

                  <img class="mt-3 img-fluid" :src="addProductData.imagesUrl[1]" alt="">
                </div>

              </div>
              <div class="col-lg-6">
                <div class="mb-3">
                  <label for="imagesUrl3" class="form-label">輸入圖片網址 3</label>
                  <input v-model="addProductData.imagesUrl[2]" type="text" class="form-control bg-light text-black"
                    id="imagesUrl3" placeholder="請輸入圖片網址 3">

                  <img class="mt-3 img-fluid" :src="addProductData.imagesUrl[2]" alt="">
                </div>

              </div>
              <div class="col-lg-6">
                <div class="mb-3">
                  <label for="imagesUrl4" class="form-label">輸入圖片網址 4</label>
                  <input v-model="addProductData.imagesUrl[3]" type="text" class="form-control bg-light text-black"
                    id="imagesUrl4" placeholder="請輸入圖片網址 4">

                  <img class="mt-3 img-fluid" :src="addProductData.imagesUrl[3]" alt="">
                </div>

              </div>
              <div class="col-lg-6">
                <div class="mb-3">
                  <label for="imagesUrl5" class="form-label">輸入圖片網址 5</label>
                  <input v-model="addProductData.imagesUrl[4]" type="text" class="form-control bg-light text-black"
                    id="imagesUrl5" placeholder="請輸入圖片網址 5">

                  <img class="mt-3 img-fluid" :src="addProductData.imagesUrl[4]" alt="">
                </div>

              </div>

            </div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">關閉</button>
            <button type="button" class="btn btn-pink" @click="addProduct">上傳</button>
          </div>
        </div>
      </div>
    </div>
    <!-- modal 建立新產品 end -->
    <!-- Modal編輯產品-->
    <div class="modal fade" id="updateProductModal" tabindex="-1" aria-labelledby="updateProductModalLabel"
      aria-hidden="true">
      <div class="modal-dialog  modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="updateProductModalLabel">更新產品資訊</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body ">



            <div class="row">
              <div class="col-lg-12">
                <div class="mb-3">
                  <label for="title" class="form-label">產品標題</label>
                  <input v-model="tempProduct.title" type="text" class="form-control bg-light text-black" id="title"
                    placeholder="請輸入產品標題">
                </div>
                <div class="mb-3">
                  <label for="description" class="form-label">產品描述</label>
                  <input v-model="tempProduct.description" type="text" class="form-control bg-light text-black"
                    id="description" placeholder="請輸入產品描述">
                </div>
                <div class="mb-3">
                  <label for="content" class="form-label">產品說明</label>
                  <input v-model="tempProduct.content" type="text" class="form-control bg-light text-black" id="content"
                    placeholder="請輸入產品說明">
                </div>

              </div>
              <div class="col-lg-12">
                <div class="row">
                  <div class="col-lg-6  ">
                    <div class="mb-3">
                      <label for="category" class="form-label">分類</label>
                      <input v-model="tempProduct.category" type="text" class="form-control bg-light text-black"
                        id="category" placeholder="分類">
                    </div>
                    <div class="mb-3">
                      <label for="unit" class="form-label">單位</label>
                      <input v-model="tempProduct.unit" type="text" class="form-control bg-light text-black" id="unit"
                        placeholder="單位">
                    </div>


                  </div>
                  <div class="col-lg-6  ">
                    <div class="mb-3">
                      <label for="originPrice" class="form-label">原價</label>
                      <input v-model="tempProduct.origin_price" min="0" type="number"
                        class="form-control bg-light text-black" id="originPrice" placeholder="原價">
                    </div>
                    <div class="mb-3">
                      <label for="price" class="form-label">售價</label>
                      <input v-model="tempProduct.price" min="0" type="number" class="form-control bg-light text-black"
                        id="price" placeholder="售價">
                    </div>

                  </div>

                </div>



              </div>

            </div>


            <div class="mb-3" >
              <label for="imageUrl" class="form-label">輸入主圖網址</label>
              <input v-model="tempProduct.imageUrl" type="text" class="form-control bg-light text-black" id="imageUrl"
                placeholder="請輸入主圖網址">

              <img class="mt-3 img-fluid" :src="tempProduct.imageUrl" alt="">
            </div>
            <div class="row">
              <template v-if="tempProduct?.imagesUrl?.length">
              <div v-for="(item,index) in tempProduct.imagesUrl" class="col-lg-6">
                <div class="mb-3" >
                  <label :for=" `imagesUrl${index+1}` " class="form-label">輸入圖片網址{{index+1}}</label>
                  <input v-model="item" type="text" class="form-control bg-light text-black" id="`imagesUrl${index+1}`"
                    :placeholder=" `請輸入圖片網址${index+1}`">

                  <img class="mt-3 img-fluid" :src="item" alt="">
                </div>

              </div>
            </template>

            </div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">關閉</button>
            <button type="button" class="btn btn-pink" @click="addProduct(tempProduct.id)">儲存變更</button>
          </div>
        </div>
      </div>
    </div>
    <!-- modal 編輯產品 end -->


  </div>

  </div>
  <script src="./js/bootstrap/bootstrap.min.js"></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/axios/0.9.1/axios.min.js'></script>

  <script src="js/data.js"> </script>
  <script type="module" src="./js/product.js"></script>

</body>

</html>